---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';

const title = "Contact";
const description = "Envoyez-moi un message";
const siteUrl = import.meta.env.SITE || '';
---

<html lang="fr">
	<head>
		<BaseHead title={title} description={description} />
		<style>
			main {
				width: calc(100% - 2em);
				max-width: 100%;
				margin: 0;
			}
			.content {
				width: 720px;
				max-width: calc(100% - 2em);
				margin: auto;
				padding: 2em 1em;
				color: rgb(var(--gray-dark));
			}
			.title {
				margin-bottom: 1.5em;
				text-align: center;
			}
			.title h1 {
				margin: 0 0 0.5em 0;
			}
			.title p {
				color: rgb(var(--gray));
			}
			form {
				display: flex;
				flex-direction: column;
				gap: 1.5em;
			}
			.form-group {
				display: flex;
				flex-direction: column;
				gap: 0.5em;
			}
			label {
				font-weight: 500;
			}
			input,
			textarea {
				padding: 0.75em;
				border: 1px solid rgb(var(--gray-light));
				border-radius: 8px;
				font-size: 1em;
				font-family: inherit;
			}
			input:focus,
			textarea:focus {
				outline: none;
				border-color: var(--accent);
				box-shadow: 0 0 0 2px rgba(var(--accent-rgb, 136, 58, 234), 0.2);
			}
			textarea {
				min-height: 150px;
				resize: vertical;
			}
			button {
				padding: 0.75em 1.5em;
				background: var(--accent);
				color: white;
				border: none;
				border-radius: 8px;
				font-size: 1em;
				font-weight: 500;
				cursor: pointer;
				transition: background 0.2s ease;
			}
			button:hover {
				background: var(--accent-dark);
			}
			/* Honeypot anti-spam */
			.hidden {
				display: none;
			}
		</style>
	</head>

	<body>
		<Header />
		<main>
			<div class="content">
				<div class="title">
					<h1>{title}</h1>
					<p>{description}</p>
					<hr />
				</div>
				<form action="https://formspree.io/f/mrebnjar" method="POST">
					<!-- Honeypot anti-spam -->
					<input type="text" name="_gotcha" class="hidden" />
					<!-- Redirection aprÃ¨s envoi -->
					<input type="hidden" name="_next" value={`${siteUrl}/thanks`} />

					<div class="form-group">
						<label for="name">Nom</label>
						<input type="text" id="name" name="name" required />
					</div>

					<div class="form-group">
						<label for="email">Email</label>
						<input type="email" id="email" name="email" required />
					</div>

					<div class="form-group">
						<label for="message">Message</label>
						<textarea id="message" name="message" required></textarea>
					</div>

					<button type="submit">Envoyer</button>
				</form>
			</div>
		</main>
		<Footer />
		<script is:inline>
			window.addEventListener('pageshow', () => {
				document.querySelector('form')?.reset();
			});
		</script>
	</body>
</html>
